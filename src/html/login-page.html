<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Vince Drives You</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Vince Drives You">
    <meta name="keywords" content="Ride, Taxi, Airport">
    <meta name="author" content="Dave Leeper">
    <!-- https://ogp.me -->
    <meta property="og:title" content="Vince Drives You" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://www.imdb.com/title/tt0117500/" />
    <meta property="og:image" content="https://ia.media-imdb.com/images/rock.jpg" />
    <script type="text/javascript" src="./js/client/messages.js"></script>
    <script type="text/javascript" src="./js/client/queue.js"></script>
    <script type="text/javascript" src="./js/client/tree-node.js"></script>
    <script type="text/javascript" src="./js/client/tree.js"></script>
    <script type="text/javascript" src="./js/client/component-lifecycle.js"></script>
    <script type="text/javascript" src="./js/client/javascript-web-token.js"></script>
    <script type="text/javascript" src="./js/client/component.js"></script>
    <script type="text/javascript" src="./js/client/slot-manager.js"></script>
    <script type="text/javascript" src="./js/client/loader.js"></script>
    <script type="text/javascript" src="./js/client/registry.js"></script>
    <script type="text/javascript" src="./js/client/server-interaction/si-users.js"></script>
    <script type="text/javascript" src="./js/client/test.js"></script>
    <script type="text/javascript" src="./js/client/purify.min.js"></script>
    <link rel="stylesheet" href="./css/styles.css">
    <script>
      function initializeApp() {
        // const server = `http://localhost:8080/`
        const server = `https://uscomicsserver.fly.dev/`
        Registry.register(`Server`, server)

        const params = new URLSearchParams(window.location.search)
        const token = params.get(`token`)

        JavascriptWebToken.storeCredentials(JSON.parse(token))
        document.addEventListener(`DOMContentLoaded`, async () => { 
          Loader.registerCustomTags()
          await Loader.loadIncludes()
          SlotManager.loadSlots()
          Queue.broadcast(Messages.SITE_LOADED, null)
        })
      }

      function setCSSDefaults() {
        const r = document.querySelector(':root')
        var rs = getComputedStyle(r);
        const blue50 = rs.getPropertyValue('--blue-50')
        const black = rs.getPropertyValue('--black')
        r.style.setProperty('--button-color', black);
        r.style.setProperty('--button-background-color', blue50);
        r.style.setProperty('--button-border-color', blue50);
      }
      setCSSDefaults()
      initializeApp()
    </script>
  </head>
  <body class="margin-5 bg-grey-e">
    <div class="h300px margin-b-50">
      <include-html include-in="login-page.html" src="./html/components/login.html" component-class="Login" component-id="Login1"></include-html>
    </div>
  </body>
</html>
